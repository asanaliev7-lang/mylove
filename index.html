<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>14 —Ñ–µ–≤—Ä–∞–ª—è üíò</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- —Ñ–∞–≤–∏–∫–æ–Ω -->
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="apple-touch-icon" href="favicon.png" />
  <meta name="theme-color" content="#050816" />

  <style>
    :root {
      --bg: #050816;
      --bg-card: rgba(15, 23, 42, 0.94);
      --accent: #ec4899;
      --accent-soft: rgba(236, 72, 153, 0.08);
      --text: #f9fafb;
      --text-muted: #9ca3af;
      --radius-lg: 18px;
      --radius-full: 999px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top, #1f2937 0, transparent 55%),
        radial-gradient(circle at bottom, #020617 0, transparent 60%),
        var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 14px;
    }

    .container {
      max-width: 980px;
      width: 100%;
      background: radial-gradient(circle at top left, #020617 0, #020617 40%, #020617ee 100%);
      border-radius: 20px;
      padding: 18px 14px 22px;
      box-shadow: 0 18px 50px rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.35);
      backdrop-filter: blur(26px);
    }

    header {
      text-align: center;
      margin-bottom: 18px;
      padding: 0 6px;
    }

    header h1 {
      font-size: clamp(24px, 6vw, 34px);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      line-height: 1.2;
    }

    header h1 span {
      background: linear-gradient(120deg, #ec4899, #f97316, #eab308);
      -webkit-background-clip: text;
      color: transparent;
    }

    header p {
      margin-top: 6px;
      font-size: 13px;
      color: var(--text-muted);
    }

    main {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 14px;
    }

    section {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 14px 14px 16px;
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .section-title {
      font-size: 15px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-title span.emoji {
      font-size: 18px;
    }

    .section-text {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.55;
    }

    /* ===== –ì–ê–õ–ï–†–ï–Ø-–°–õ–ê–ô–î–ï–† ===== */
    .gallery-block {
      background: radial-gradient(circle at top, rgba(15,23,42,0.9), rgba(15,23,42,0.98));
    }

    .gallery-slider {
      position: relative;
      margin-top: 10px;
      border-radius: 18px;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.55);
      background: #020617;
    }

    .gallery-track {
      display: flex;
      width: 100%;
      transition: transform 0.3s ease;
    }

    .gallery-slide {
      min-width: 100%;
      position: relative;
      height: 260px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #020617;
    }

    @media (min-width: 640px) {
      .gallery-slide {
        height: 380px;
      }
    }

    .gallery-slide img {
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
      display: block;
      background: #020617;
    }

    .gallery-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      border: none;
      background: rgba(15, 23, 42, 0.7);
      color: #e5e7eb;
      border-radius: 999px;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.6);
    }

    .gallery-nav:active {
      transform: translateY(-50%) scale(0.96);
    }

    .gallery-nav.prev { left: 8px; }
    .gallery-nav.next { right: 8px; }

    .gallery-dots {
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 6px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.8);
    }

    .gallery-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(148,163,184,0.8);
      cursor: pointer;
    }

    .gallery-dot.active {
      width: 12px;
      background: #ec4899;
    }

    /* –õ–∞–π—Ç–±–æ–∫—Å */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 40;
      padding: 14px;
    }

    .lightbox.open {
      display: flex;
    }

    .lightbox-inner {
      max-width: min(100vw - 32px, 900px);
      width: auto;
      border-radius: 18px;
      overflow: hidden;
      background: #020617;
      border: 1px solid rgba(148,163,184,0.8);
      box-shadow: 0 20px 60px rgba(0,0,0,0.9);
      position: relative;
    }

    .lightbox-img-wrapper {
      width: 100%;
      height: auto;
      max-height: 90vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #020617;
    }

    .lightbox-img-wrapper img {
      max-width: 100%;
      max-height: 90vh;
      width: auto;
      height: auto;
      object-fit: contain;
      display: block;
    }

    .lightbox-top {
      position: absolute;
      top: 8px;
      right: 10px;
      display: flex;
      gap: 6px;
      z-index: 2;
    }

    .lightbox-btn {
      border: none;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 12px;
      cursor: pointer;
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      border: 1px solid rgba(148,163,184,0.7);
    }

    .lightbox-btn:active { transform: translateY(1px); }

    /* ===== –®–∞–ø–∫–∞ –∏–≥—Ä ===== */
    .games-header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .pill {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: var(--radius-full);
      background: var(--accent-soft);
      color: var(--text-muted);
      border: 1px solid rgba(248, 113, 113, 0.4);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    /* ===== –ö–∞—Ä—Ç–æ—á–∫–∏ –∏–≥—Ä ===== */
    .game-card {
      margin-top: 4px;
      padding: 0;
      overflow: hidden;
    }

    .game-header {
      width: 100%;
      padding: 10px 14px;
      background: transparent;
      border: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      cursor: pointer;
      color: var(--text);
    }

    .game-header-left {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .game-header-left span.emoji { font-size: 18px; }

    .game-header-title {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 2px;
    }

    .game-header-title small {
      font-size: 11px;
      color: var(--text-muted);
    }

    .game-header-icon { font-size: 14px; opacity: 0.8; }

    .game-body {
      padding: 0 14px 14px;
      border-top: 1px solid rgba(148,163,184,0.25);
      display: none;
    }

    .game-card.open .game-body { display: block; }

    /* ===== –ò–≥—Ä–∞ 1: memory ===== */
    .memory-wrapper {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 8px;
    }

    .memory-info {
      font-size: 12px;
      color: var(--text-muted);
    }

    .memory-grid {
      margin-top: 4px;
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 8px;
    }

    @media (max-width: 480px) {
      .memory-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); }
      .card { padding-bottom: 105%; }
      .card-front { font-size: 18px; }
    }

    .card {
      position: relative;
      width: 100%;
      padding-bottom: 130%;
      cursor: pointer;
    }

    .card-inner {
      position: absolute;
      inset: 0;
      border-radius: 14px;
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.45);
      overflow: hidden;
      background: #020617;
    }

    .card-face {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.2s ease;
    }

    .card-front {
      font-size: 22px;
      color: var(--text-muted);
      background: radial-gradient(circle at top, #020617, #020617, #020617);
    }

    .card-back {
      opacity: 0;
      background: #020617;
    }

    .card-back img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .card.flipped .card-front,
    .card.matched .card-front {
      opacity: 0;
    }

    .card.flipped .card-back,
    .card.matched .card-back {
      opacity: 1;
    }

    .memory-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
      flex-wrap: wrap;
    }

    button.btn {
      border: none;
      border-radius: var(--radius-full);
      padding: 7px 14px;
      font-size: 13px;
      cursor: pointer;
      background: linear-gradient(135deg, #ec4899, #f97316);
      color: white;
      font-weight: 500;
      box-shadow: 0 8px 20px rgba(248, 113, 113, 0.35);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    button.btn:active {
      transform: translateY(1px);
      box-shadow: 0 5px 14px rgba(248, 113, 113, 0.4);
    }

    .memory-message {
      margin-top: 6px;
      font-size: 12px;
      color: #a5b4fc;
    }

    /* ===== –ò–≥—Ä–∞ 2: –∫–≤–∏–∑ ===== */
    .quiz-intro {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 13px;
      color: var(--text-muted);
    }

    .quiz-result {
      font-size: 12px;
      color: #a5b4fc;
    }

    .quiz-modal {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.94);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 45;
      padding: 16px;
    }

    .quiz-modal.open { display: flex; }

    .quiz-box {
      max-width: 600px;
      width: 100%;
      background: #020617;
      border-radius: 18px;
      padding: 16px 18px 18px;
      border: 1px solid rgba(148,163,184,0.85);
      box-shadow: 0 22px 55px rgba(0,0,0,0.9);
      position: relative;
    }

    .quiz-close {
      position: absolute;
      top: 8px;
      right: 10px;
      border: none;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 12px;
      cursor: pointer;
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      border: 1px solid rgba(15,23,42,0.8);
    }

    .quiz-close:active { transform: translateY(1px); }

    .quiz-step {
      margin-top: 4px;
      margin-bottom: 12px;
    }

    .quiz-question {
      font-size: 14px;
      margin-bottom: 6px;
    }

    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
    }

    .quiz-options label {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .quiz-options input {
      accent-color: #ec4899;
    }

    .quiz-step-hint {
      margin-top: 6px;
      font-size: 12px;
      color: #f97316;
    }

    .quiz-next-btn {
      margin-top: 4px;
    }

    .quiz-correct-hint {
      color: #a7f3d0;
      font-weight: 500;
    }

    .quiz-correct-hint::before {
      content: "‚ûú ";
      color: #22c55e;
    }

    /* ===== –ò–≥—Ä–∞ 3: —Ñ—Ä–∞–∑–∞ ===== */
    .phrase-intro {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 13px;
      color: var(--text-muted);
    }

    .phrase-result {
      font-size: 12px;
      color: #a5b4fc;
    }

    .phrase-modal {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.94);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 45;
      padding: 16px;
    }

    .phrase-modal.open { display: flex; }

    .phrase-box {
      max-width: 600px;
      width: 100%;
      background: #020617;
      border-radius: 18px;
      padding: 16px 18px 18px;
      border: 1px solid rgba(148,163,184,0.85);
      box-shadow: 0 22px 55px rgba(0,0,0,0.9);
      position: relative;
    }

    .phrase-close {
      position: absolute;
      top: 8px;
      right: 10px;
      border: none;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 12px;
      cursor: pointer;
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      border: 1px solid rgba(15,23,42,0.8);
    }

    .phrase-close:active { transform: translateY(1px); }

    .phrase {
      margin-top: 4px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .phrase-info {
      font-size: 12px;
      color: var(--text-muted);
    }

    .phrase-target {
      min-height: 40px;
      padding: 6px;
      border-radius: 12px;
      border: 1px dashed rgba(148, 163, 184, 0.7);
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .phrase-words {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .chip {
      border-radius: var(--radius-full);
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 5px 10px;
      font-size: 12px;
      background: rgba(15, 23, 42, 0.9);
      color: var(--text);
      cursor: pointer;
      white-space: nowrap;
    }

    .chip:active { transform: translateY(1px); }

    .chip-used { opacity: 0.4; }

    .chip-target {
      background: linear-gradient(135deg, rgba(236,72,153,0.16), rgba(59,130,246,0.18));
      border-color: rgba(236,72,153,0.7);
    }

    .chip-correct {
      background: rgba(34,197,94,0.15);
      border-color: #22c55e;
      color: #bbf7d0;
    }

    .chip-wrong {
      background: rgba(248,113,113,0.14);
      border-color: #f97316;
      color: #fecaca;
    }

    .phrase-bottom-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      flex-wrap: wrap;
    }

    /* ===== –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–∏—Å—å–º–∞ ===== */
    .letter-section {
      margin-top: 4px;
      position: relative;
      cursor: default;
      transition: box-shadow 0.2s ease, border-color 0.2s ease, transform 0.15s ease;
    }

    .letter-section.unlocked {
      border-color: #ec4899;
      box-shadow: 0 10px 40px rgba(236,72,153,0.35);
      cursor: pointer;
      transform: translateY(-1px);
    }

    .letter-section.unlocked:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 45px rgba(236,72,153,0.4);
    }

    .prize-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(236, 72, 153, 0.12);
      border: 1px solid rgba(249, 115, 22, 0.7);
      color: #fed7aa;
      margin-bottom: 6px;
    }

    .letter-hint {
      font-size: 12px;
      color: #f97316;
      margin-bottom: 2px;
    }

    /* ===== –ü–∏—Å—å–º–æ: –∫–æ–Ω–≤–µ—Ä—Ç ===== */

    @keyframes envelopePop {
      0% {
        opacity: 0;
        transform: translateY(40px) scale(0.8);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes flapOpen {
      0% {
        transform: rotateX(0deg);
      }
      100% {
        transform: rotateX(-170deg);
      }
    }

    @keyframes letterRise {
      0% {
        opacity: 0;
        transform: translate(-50%, 30px);
      }
      100% {
        opacity: 1;
        transform: translate(-50%, 0);
      }
    }

    .letter-overlay {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at top, rgba(15,23,42,0.98), rgba(15,23,42,0.96)),
        radial-gradient(circle at bottom, rgba(15,23,42,0.94), rgba(15,23,42,0.98));
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 50;
      padding: 16px;
    }

    .letter-overlay.open {
      display: flex;
    }

    .envelope {
      position: relative;
      width: min(90vw, 520px);
      height: min(70vh, 360px);
      transform-origin: center;
      opacity: 0;
      transform: translateY(40px) scale(0.8);
    }

    .letter-overlay.open .envelope {
      animation: envelopePop 0.45s ease-out forwards;
    }

    .envelope-shadow {
      position: absolute;
      left: 8%;
      right: 8%;
      bottom: -26px;
      height: 40px;
      background: radial-gradient(circle at center, rgba(0,0,0,0.7), transparent 70%);
      filter: blur(8px);
      opacity: 0.9;
    }

    .envelope-body {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 62%;
      border-radius: 18px;
      background: linear-gradient(135deg, #0f172a, #020617);
      border: 1px solid rgba(148,163,184,0.7);
      box-shadow: 0 22px 50px rgba(0,0,0,0.85);
      overflow: hidden;
    }

    .envelope-body::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(236,72,153,0.15), transparent 60%);
      opacity: 0.8;
      pointer-events: none;
    }

    .envelope-flap {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 52%;
      transform-origin: top center;
      transform-style: preserve-3d;
      background: linear-gradient(135deg, #111827, #020617);
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
      border: 1px solid rgba(148,163,184,0.8);
      border-bottom: none;
      clip-path: polygon(0% 0%, 100% 0%, 50% 88%);
      box-shadow: 0 12px 30px rgba(0,0,0,0.7);
      z-index: 3;
    }

    .envelope-flap::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center, rgba(236,72,153,0.35), transparent 65%);
      opacity: 0.8;
      mix-blend-mode: screen;
      pointer-events: none;
    }

    .letter-overlay.open .envelope-flap {
      animation: flapOpen 0.7s ease-out 0.3s forwards;
    }

    .letter-card {
      position: absolute;
      left: 50%;
      top: 10%;
      width: 86%;
      height: 78%;
      transform: translate(-50%, 30px);
      border-radius: 18px;
      background:
        radial-gradient(circle at top, rgba(248,250,252,0.12), transparent 60%),
        radial-gradient(circle at bottom, rgba(15,23,42,0.9), #020617);
      border: 1px solid rgba(148,163,184,0.85);
      box-shadow: 0 18px 45px rgba(0,0,0,0.9);
      padding: 18px 18px 20px;
      overflow: hidden;
      opacity: 0;
      z-index: 2;
    }

    .letter-overlay.open .letter-card {
      animation: letterRise 0.7s ease-out 0.45s forwards;
    }

    .letter-card-inner {
      max-height: 100%;
      overflow-y: auto;
      padding-right: 6px;
    }

    .letter-card-inner p {
      font-size: 14px;
      line-height: 1.7;
      color: #e5e7eb;
      margin-bottom: 8px;
    }

    .letter-card-inner p:first-child {
      font-weight: 600;
      font-size: 15px;
      color: #f9fafb;
    }

    .letter-card-inner p:last-child {
      margin-bottom: 0;
    }

    .letter-close {
      position: absolute;
      top: 6px;
      right: 10px;
      border: none;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 12px;
      cursor: pointer;
      background: rgba(15,23,42,0.96);
      color: #fefce8;
      border: 1px solid rgba(15,23,42,0.9);
      z-index: 4;
    }

    .letter-close:active { transform: translateY(1px); }

    /* ===== –§—É—Ç–µ—Ä ===== */
    footer {
      margin-top: 16px;
      text-align: center;
      font-size: 11px;
      color: var(--text-muted);
    }

    .heart-btn {
      margin-left: 4px;
      background: transparent;
      border: none;
      cursor: pointer;
      color: #f97316;
      font-size: 13px;
      padding: 2px 6px;
      border-radius: 999px;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.1s ease;
    }

    .heart-btn:active {
      transform: scale(0.9);
      background: rgba(236,72,153,0.18);
      box-shadow: 0 0 0 1px rgba(236,72,153,0.4);
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><span>14 —Ñ–µ–≤—Ä–∞–ª—è</span> ‚Äî –Ω–∞—à –º–∞–ª–µ–Ω—å–∫–∏–π –º–∏—Ä</h1>
      <p>–ù–∞—à–∏ —Ñ–æ—Ç–æ, –Ω–µ–º–Ω–æ–≥–æ –∏–≥—Ä—ã –∏ –æ–¥–Ω–æ –±–æ–ª—å—à–æ–µ –ø–∏—Å—å–º–æ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è üíå</p>
    </header>

    <main>
      <!-- 1. –ì–∞–ª–µ—Ä–µ—è -->
      <section class="gallery-block">
        <div class="section-title">
          <span class="emoji">üì∏</span>
          <span>–ì–∞–ª–µ—Ä–µ—è –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π</span>
        </div>
        <p class="section-text">
          –ó–¥–µ—Å—å –ø—Ä–æ—Å—Ç–æ –Ω–∞—à–∏ —Ñ–æ—Ç–æ ‚Äî –ª–∏—Å—Ç–∞–π, –≤—Å–ø–æ–º–∏–Ω–∞–π –∏ —É–ª—ã–±–∞–π—Å—è.
        </p>

        <div class="gallery-slider">
          <div class="gallery-track" id="gallery-track"></div>
          <button class="gallery-nav prev" id="gallery-prev">‚Äπ</button>
          <button class="gallery-nav next" id="gallery-next">‚Ä∫</button>
          <div class="gallery-dots" id="gallery-dots"></div>
        </div>
      </section>

      <!-- —à–∞–ø–∫–∞ –∏–≥—Ä -->
      <section>
        <div class="games-header-row">
          <div class="section-title" style="margin-bottom:0;">
            <span class="emoji">üïπÔ∏è</span>
            <span>–ú–∏–Ω–∏-–∏–≥—Ä—ã –ø—Ä–æ –Ω–∞—Å</span>
          </div>
          <span class="pill" id="games-progress">–ü—Ä–æ–≥—Ä–µ—Å—Å –∫ –ø–∏—Å—å–º—É: 0/3 –∏–≥—Ä</span>
        </div>
      </section>

      <!-- –ò–≥—Ä–∞ 1 -->
      <section class="game-card open">
        <button class="game-header" data-target="game1">
          <div class="game-header-left">
            <span class="emoji">üß†</span>
            <div class="game-header-title">
              <span>–ò–≥—Ä–∞ 1 ‚Äî –Ω–∞–π–¥–∏ –ø–∞—Ä—ã</span>
              <small>–§–æ—Ç–∫–∏, –≥–¥–µ –º—ã —Ç–∞–∫–∏–µ —Ä–∞–∑–Ω—ã–µ –∏ —Ç–∞–∫–∏–µ —Å–≤–æ–∏</small>
            </div>
          </div>
          <span class="game-header-icon">‚ñº</span>
        </button>
        <div class="game-body" id="game1">
          <div class="memory-wrapper">
            <p class="memory-info">
              –û—Ç–∫—Ä—ã–≤–∞–π –ø–æ –¥–≤–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –∏—â–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è. –ö–æ–≥–¥–∞ –Ω–∞–π–¥—ë—à—å –≤—Å–µ –ø–∞—Ä—ã ‚Äî –∏–≥—Ä–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–π.
            </p>

            <div class="memory-grid" id="memory-grid"></div>

            <div class="memory-controls">
              <span class="pill" id="memory-tries">–ü–æ–ø—ã—Ç–æ–∫: 0</span>
              <button class="btn" id="memory-restart">‚Ü∫ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏</button>
            </div>

            <div class="memory-message" id="memory-message"></div>
          </div>
        </div>
      </section>

      <!-- –ò–≥—Ä–∞ 2 -->
      <section class="game-card">
        <button class="game-header" data-target="game2">
          <div class="game-header-left">
            <span class="emoji">‚ùì</span>
            <div class="game-header-title">
              <span>–ò–≥—Ä–∞ 2 ‚Äî –º–∏–Ω–∏-–∫–≤–∏–∑ –ø—Ä–æ –Ω–∞—Å</span>
              <small>–ü—Ä–æ–≤–µ—Ä–∫–∞, –∫–∞–∫ —Ö–æ—Ä–æ—à–æ –º—ã —á—É–≤—Å—Ç–≤—É–µ–º –¥—Ä—É–≥ –¥—Ä—É–≥–∞</small>
            </div>
          </div>
          <span class="game-header-icon">‚ñº</span>
        </button>
        <div class="game-body" id="game2">
          <div class="quiz-intro">
            <p>
              –Ø –∑–∞—Ä–∞–Ω–µ–µ –≤—ã–±—Ä–∞–ª —Å–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã, –∞ —Ç—ã –ø—ã—Ç–∞–µ—à—å—Å—è —É–≥–∞–¥–∞—Ç—å, —á—Ç–æ –±—ã —è –Ω–∞–∂–∞–ª.
              –í–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –ø–æ –æ–¥–Ω–æ–º—É –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–æ—à–∫–µ.
            </p>
            <button class="btn" id="quiz-open">–ù–∞—á–∞—Ç—å</button>
            <div class="quiz-result" id="quiz-result"></div>
          </div>
        </div>
      </section>

      <!-- –ò–≥—Ä–∞ 3 -->
      <section class="game-card">
        <button class="game-header" data-target="game3">
          <div class="game-header-left">
            <span class="emoji">üß©</span>
            <div class="game-header-title">
              <span>–ò–≥—Ä–∞ 3 ‚Äî —Å–æ–±–µ—Ä–∏ —Ñ—Ä–∞–∑—É</span>
              <small>–ü—è—Ç—å —Å–ª–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —è –≤–∏–∂—É —Ç–µ–±—è</small>
            </div>
          </div>
          <span class="game-header-icon">‚ñº</span>
        </button>
        <div class="game-body" id="game3">
          <div class="phrase-intro">
            <p class="phrase-info">
              –í —ç—Ç–æ–π –∏–≥—Ä–µ —Å–ø—Ä—è—Ç–∞–Ω—ã –¥–µ—Å—è—Ç—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ñ—Ä–∞–∑ –ø—Ä–æ –Ω–∞—Å. –ò–≥—Ä–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–æ—à–∫–µ ‚Äî —Å–æ–±–∏—Ä–∞–π –∫–∞–∂–¥—É—é —Ñ—Ä–∞–∑—É –∏–∑ —Å–ª–æ–≤ –≤–Ω–∏–∑—É.
            </p>
            <button class="btn" id="phrase-open">–û—Ç–∫—Ä—ã—Ç—å –∏–≥—Ä—É</button>
            <span class="phrase-result" id="phrase-result"></span>
          </div>
        </div>
      </section>

      <!-- –ü–∏—Å—å–º–æ-–ø—Ä–∏–∑ -->
      <section class="letter-section locked" id="letter-section">
        <div class="section-title">
          <span class="emoji">üíå</span>
          <span>–ü–∏—Å—å–º–æ –ø–æ—Å–ª–µ –∫–≤–µ—Å—Ç–∞</span>
        </div>
        <div class="prize-badge">
          üéÅ –ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–∑ –∑–∞ —Ç—Ä–∏ –∏–≥—Ä—ã
        </div>
        <p class="letter-hint" id="letter-hint">
          –°–µ–π—á–∞—Å –ø–∏—Å—å–º–æ —Å–∫—Ä—ã—Ç–æ. –ü—Ä–æ–π–¥–∏ –≤—Å–µ —Ç—Ä–∏ –∏–≥—Ä—ã —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—Å–ø–ª—ã–≤—ë—Ç –∫–æ–Ω–≤–µ—Ä—Ç —Å –ø–∏—Å—å–º–æ–º —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è.
          –ü–æ—Ç–æ–º –µ–≥–æ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è, –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞—è –Ω–∞ —ç—Ç–æ—Ç –±–ª–æ–∫.
        </p>
      </section>
    </main>

    <footer>
      –°–¥–µ–ª–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é
      <button type="button" id="reset-heart" class="heart-btn">‚ô•</button>
    </footer>
  </div>

  <!-- –õ–∞–π—Ç–±–æ–∫—Å -->
  <div class="lightbox" id="lightbox">
    <div class="lightbox-inner">
      <div class="lightbox-top">
        <button class="lightbox-btn" id="lightbox-close">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div class="lightbox-img-wrapper">
        <img src="" alt="–§–æ—Ç–æ" id="lightbox-img" />
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –∫–≤–∏–∑–∞ -->
  <div class="quiz-modal" id="quiz-modal">
    <div class="quiz-box">
      <button class="quiz-close" id="quiz-close">‚úï</button>
      <div class="quiz-step" id="quiz-step"></div>
      <button class="btn quiz-next-btn" id="quiz-next">–î–∞–ª—å—à–µ</button>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –∏–≥—Ä—ã —Å —Ñ—Ä–∞–∑–æ–π -->
  <div class="phrase-modal" id="phrase-modal">
    <div class="phrase-box">
      <button class="phrase-close" id="phrase-close">‚úï</button>
      <div class="phrase">
        <p class="phrase-info">
          –ù–∞–∂–∏–º–∞–π –Ω–∞ —Å–ª–æ–≤–∞ ‚Äî –æ–Ω–∏ –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å–≤–µ—Ä—Ö—É. –ï—Å–ª–∏ —Å–æ–±–µ—Ä—ë—à—å —Ñ—Ä–∞–∑—É –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, —É—Ä–æ–≤–µ–Ω—å –∑–∞—Å—á–∏—Ç–∞–µ—Ç—Å—è, –∏ –ø–æ—è–≤–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.
        </p>

        <div class="phrase-target" id="phrase-target"></div>
        <div class="phrase-words" id="phrase-words"></div>

        <div class="phrase-bottom-row">
          <span class="phrase-result" id="phrase-result-modal"></span>
          <button class="btn" id="phrase-reset">‚Ü∫ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å —Å–ª–æ–≤–∞</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ö–æ–Ω–≤–µ—Ä—Ç —Å –ø–∏—Å—å–º–æ–º -->
  <div class="letter-overlay" id="letter-overlay">
    <div class="envelope">
      <button class="letter-close" id="letter-close">‚úï</button>
      <div class="envelope-shadow"></div>
      <div class="envelope-body"></div>
      <div class="envelope-flap"></div>
      <div class="letter-card">
        <div class="letter-card-inner">
          <p>–ú–æ—è –ª—é–±–∏–º–∞—è,</p>

          <p>
            —è –¥–æ–ª–≥–æ —Å–æ–±–∏—Ä–∞–ª—Å—è —Å –º—ã—Å–ª—è–º–∏, –ø—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å —ç—Ç–æ –ø–∏—Å—å–º–æ. –ü–æ—Ç–æ–º—É —á—Ç–æ –≤—Å—ë, —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–æ–±–æ–π, —Ç—Ä–µ–±—É–µ—Ç
            –æ—Å–æ–±–æ–π —Ç–∏—à–∏–Ω—ã –≤–Ω—É—Ç—Ä–∏. –¢—ã ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ —á–µ–ª–æ–≤–µ–∫ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏. –¢—ã —Å—Ç–∞–ª–∞ –µ—ë —á–∞—Å—Ç—å—é. –¢—ã —Å—Ç–∞–ª–∞ —Ç–µ–º, –æ –∫–æ–º –¥—É–º–∞—é—Ç
            –≤ –ø–∞—É–∑–∞—Ö –º–µ–∂–¥—É –¥–µ–ª–∞–º–∏, –∫–æ–≥–æ –≤—Å–ø–æ–º–∏–Ω–∞—é—Ç –ø–µ—Ä–µ–¥ —Å–Ω–æ–º –∏ —á—É–≤—Å—Ç–≤—É—é—Ç –¥–∞–∂–µ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –º–æ–ª—á–∞—Ç.
          </p>

          <p>
            –ò–Ω–æ–≥–¥–∞ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —Ç—ã –ø–æ—è–≤–∏–ª–∞—Å—å –≤ –º–æ–µ–π —Å—É–¥—å–±–µ –Ω–µ —Å–ª—É—á–∞–π–Ω–æ. –ë—É–¥—Ç–æ –í—Å–µ–ª–µ–Ω–Ω–∞—è –æ–¥–Ω–∞–∂–¥—ã —Ä–µ—à–∏–ª–∞, —á—Ç–æ –º–Ω–µ –Ω—É–∂–µ–Ω
            –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π —á–µ–ª–æ–≤–µ–∫ ‚Äî —Å —Ç–≤–æ–µ–π —É–ª—ã–±–∫–æ–π, —Ç–≤–æ–µ–π –Ω–µ–∂–Ω–æ—Å—Ç—å—é, —Ç–≤–æ–µ–π —Å–∏–ª–æ–π –∏ —Ç–≤–æ–µ–π —Ö—Ä—É–ø–∫–æ—Å—Ç—å—é –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –¢—ã
            –≤–æ—à–ª–∞ –≤ –º–æ—é –∂–∏–∑–Ω—å —Ç–∏—Ö–æ, –±–µ–∑ –≥—Ä–æ–º–∫–∏—Ö —Å–ª–æ–≤, –Ω–æ –æ—Å—Ç–∞–≤–∏–ª–∞ —Å–ª–µ–¥ —Ç–∞–∫–æ–π –≥–ª—É–±–∏–Ω—ã, —á—Ç–æ —è —É–∂–µ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é –º–∏—Ä –±–µ–∑
            —Ç–µ–±—è.
          </p>

          <p>
            –¢—ã –∏–∑–º–µ–Ω–∏–ª–∞ –≤–æ –º–Ω–µ –º–Ω–æ–≥–æ–µ. –†–∞–Ω—å—à–µ —è —Å–º–æ—Ç—Ä–µ–ª –Ω–∞ –∂–∏–∑–Ω—å –∏–Ω–∞—á–µ ‚Äî –±—ã—Å—Ç—Ä–µ–µ, –ø—Ä–æ—â–µ, –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–µ–µ. –ê —Ç–µ–ø–µ—Ä—å —è —É—á—É—Å—å
            –∑–∞–º–µ—á–∞—Ç—å –¥–µ—Ç–∞–ª–∏: –∫–∞–∫ —Å–≤–µ—Ç –ª–æ–∂–∏—Ç—Å—è –Ω–∞ –æ–∫–Ω–∞, –∫–∞–∫ –≤–µ—Ç–µ—Ä –∫–∞—Å–∞–µ—Ç—Å—è –ª–∏—Ü–∞, –∫–∞–∫ —Å–µ—Ä–¥—Ü–µ –∑–∞–º–∏—Ä–∞–µ—Ç, –∫–æ–≥–¥–∞ –¥—É–º–∞—é –æ —Ç–µ–±–µ.
            –¢—ã –Ω–∞—É—á–∏–ª–∞ –º–µ–Ω—è —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –≥–ª—É–±–∂–µ. –¢—ã –ø–æ–∫–∞–∑–∞–ª–∞, —á—Ç–æ –ª—é–±–æ–≤—å ‚Äî —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–∞–¥–æ—Å—Ç—å, –Ω–æ –∏ —Å–º–µ–ª–æ—Å—Ç—å –±—ã—Ç—å
            —É—è–∑–≤–∏–º—ã–º.
          </p>

          <p>
            –¢–≤–æ—è —É–ª—ã–±–∫–∞ ‚Äî –º–æ–π —Å–∞–º—ã–π –ª—é–±–∏–º—ã–π –≤–∏–¥ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è. –¢–≤–æ–π –≥–æ–ª–æ—Å ‚Äî –º–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–æ–º. –¢–≤–æ–π –≤–∑–≥–ª—è–¥ ‚Äî –º–µ—Å—Ç–æ, –≥–¥–µ
            —Ö–æ—á–µ—Ç—Å—è –æ—Å—Ç–∞—Ç—å—Å—è –ø–æ–¥–æ–ª—å—à–µ. –¢—ã –¥–∞–∂–µ –Ω–µ –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ—à—å, –∫–∞–∫ —Å–∏–ª—å–Ω–æ –≤–ª–∏—è–µ—à—å –Ω–∞ –º–µ–Ω—è. –ò–Ω–æ–≥–¥–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ
            –≤—Å–ø–æ–º–Ω–∏—Ç—å —Ç–µ–±—è ‚Äî –∏ –≤–Ω—É—Ç—Ä–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–µ–ø–ª–µ–µ.
          </p>

          <p>
            –õ—é–±–∏—Ç—å —Ç–µ–±—è ‚Äî —ç—Ç–æ –∫–∞–∫ —Å—Ç–æ—è—Ç—å —É –ø—Ä–æ–ø–∞—Å—Ç–∏: –Ω–µ–º–Ω–æ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–æ–∂–Ω–æ —É–ø–∞—Å—Ç—å, –º–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å—Å—è, –º–æ–∂–Ω–æ
            –ø–æ—Ç–µ—Ä—è—Ç—å —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ. –ù–æ —Ç–∞–∫ –∫—Ä–∞—Å–∏–≤–æ, —á—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å—Ç—É–ø–∏—Ç—å. –¢—ã —Ä–∞–∑—Ä—É—à–∏–ª–∞ –º–æ–∏ —Å–æ–º–Ω–µ–Ω–∏—è –æ–¥–Ω–∏–º —Å–≤–æ–∏–º —Å–∏—è–Ω–∏–µ–º.
            –¢—ã —Å–ø–∞—Å–ª–∞ –º–µ–Ω—è –¥–∞–∂–µ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Å–∞–º–∞ –æ–± —ç—Ç–æ–º –Ω–µ –∑–Ω–∞–ª–∞. –¢—ã –≤–æ—à–ª–∞ –≤ –º–æ—é –∂–∏–∑–Ω—å —Å–ª–æ–≤–Ω–æ –∞–Ω–≥–µ–ª ‚Äî –æ—Å–≤–µ—â–∞—è —Å–≤–µ—Ç–æ–º
            –º–æ–∏ —Ç—ë–º–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã, —Å–æ–≥—Ä–µ–≤–∞—è —Ç–∞–º, –≥–¥–µ –¥–∞–≤–Ω–æ –±—ã–ª–æ —Ö–æ–ª–æ–¥–Ω–æ.
          </p>

          <p>
            –Ø –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω —Ç–µ–±–µ –∑–∞ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç. –ó–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –¥–æ –ø–æ–∑–¥–Ω–µ–π –Ω–æ—á–∏. –ó–∞ —Ç–≤–æ–∏ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è. –ó–∞ —Ç–≤–æ—é –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å.
            –ó–∞ —Ç–≤–æ—é –Ω–µ–∂–Ω–æ—Å—Ç—å. –ó–∞ —Ç–≤–æ—é —Å–∏–ª—É. –¢—ã –Ω–µ –∏–¥–µ–∞–ª—å–Ω–∞ ‚Äî –∏ –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –Ω–∞—Å—Ç–æ—è—â–∞—è. –ú–Ω–µ –¥–æ—Ä–æ–≥–æ –≤ —Ç–µ–±–µ –≤—Å—ë: –∏ —Ç–≤–æ—è
            —É–ª—ã–±–∫–∞, –∏ —Ç–≤–æ–∏ —Å–æ–º–Ω–µ–Ω–∏—è, –∏ —Ç–≤–æ—è —É—Å—Ç–∞–ª–æ—Å—Ç—å, –∏ —Ç–≤–æ–∏ –º–µ—á—Ç—ã.
          </p>

          <p>
            –ò–Ω–æ–≥–¥–∞ –º–Ω–µ —Ö–æ—á–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ —Å–∏–¥–µ—Ç—å —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π –≤ —Ç–∏—à–∏–Ω–µ, –¥–µ—Ä–∂–∞—Ç—å —Ç–≤–æ—é —Ä—É–∫—É –∏ –∑–Ω–∞—Ç—å, —á—Ç–æ –º—ã –≤–º–µ—Å—Ç–µ. –ë–µ–∑
            –≥—Ä–æ–º–∫–∏—Ö —Å–ª–æ–≤. –ë–µ–∑ –æ–±–µ—â–∞–Ω–∏–π. –ü—Ä–æ—Å—Ç–æ –±—ã—Ç—å. –ü–æ—Ç–æ–º—É —á—Ç–æ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π –¥–∞–∂–µ –º–æ–ª—á–∞–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É—é—Ç–Ω—ã–º.
          </p>

          <p>
            –Ø –¥—É–º–∞—é –æ —Ç–µ–±–µ —á–∞—â–µ, —á–µ–º –≥–æ–≤–æ—Ä—é. –Ø —á—É–≤—Å—Ç–≤—É—é –±–æ–ª—å—à–µ, —á–µ–º –ø–æ–∫–∞–∑—ã–≤–∞—é. –Ø —Ö—Ä–∞–Ω—é —Ç–µ–±—è –≤ —Å–µ–±–µ –¥–∞–∂–µ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –º—ã
            –¥–∞–ª–µ–∫–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –¢—ã –∂–∏–≤—ë—à—å –≤ –º–æ–∏—Ö –º—ã—Å–ª—è—Ö, –≤ –º–æ–∏—Ö –ø–ª–∞–Ω–∞—Ö, –≤ –º–æ–∏—Ö –Ω–∞–¥–µ–∂–¥–∞—Ö. –¢—ã —Å—Ç–∞–ª–∞ —á–∞—Å—Ç—å—é –º–æ–∏—Ö –º–æ–ª–∏—Ç–≤ –∏
            –º–æ–∏—Ö –∂–µ–ª–∞–Ω–∏–π.
          </p>

          <p>
            –Ø –Ω–µ –ø—Ä–æ—à—É –æ—Ç —Ç–µ–±—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–≥–æ. –ú–Ω–µ –≤–∞–∂–Ω–æ –ª–∏—à—å –æ–¥–Ω–æ ‚Äî —á—Ç–æ–±—ã —Ç—ã –±—ã–ª–∞ —Å—á–∞—Å—Ç–ª–∏–≤–∞. –î–∞–∂–µ –µ—Å–ª–∏ –∏–Ω–æ–≥–¥–∞ —Ç–µ–±–µ –±—É–¥–µ—Ç
            —Ç—è–∂–µ–ª–æ, –¥–∞–∂–µ –µ—Å–ª–∏ —Ç—ã –±—É–¥–µ—à—å —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è –≤ —Å–µ–±–µ ‚Äî –ø–æ–º–Ω–∏, —á—Ç–æ –µ—Å—Ç—å —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –≤–∏–¥–∏—Ç –≤ —Ç–µ–±–µ —Å–≤–µ—Ç. –ß–µ–ª–æ–≤–µ–∫,
            –∫–æ—Ç–æ—Ä—ã–π –≤–µ—Ä–∏—Ç –≤ —Ç–µ–±—è —Å–∏–ª—å–Ω–µ–µ, —á–µ–º —Ç—ã —Å–∞–º–∞. –ß–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –≥–æ—Ç–æ–≤ –±—ã—Ç—å —Ä—è–¥–æ–º, –∫–æ–≥–¥–∞ —Ç—ã —É—Å—Ç–∞–Ω–µ—à—å.
          </p>

          <p>
            –Ø –Ω–µ –æ–±–µ—â–∞—é –±—ã—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–º. –ù–æ –æ–±–µ—â–∞—é –±—ã—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º. –û–±–µ—â–∞—é —Å–ª—É—à–∞—Ç—å —Ç–µ–±—è. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–±—è. –ë–µ—Ä–µ—á—å —Ç–µ–±—è.
            –†–∞–¥–æ–≤–∞—Ç—å—Å—è —Ç–≤–æ–∏–º –ø–æ–±–µ–¥–∞–º –∏ –±—ã—Ç—å —Ä—è–¥–æ–º –≤ —Ç–≤–æ–∏—Ö —Å–ª–∞–±—ã—Ö –º–æ–º–µ–Ω—Ç–∞—Ö. –Ø —Ö–æ—á—É –∏–¥—Ç–∏ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π ‚Äî —à–∞–≥ –∑–∞ —à–∞–≥–æ–º, –¥–µ–Ω—å
            –∑–∞ –¥–Ω—ë–º, –Ω–µ —Ç–æ—Ä–æ–ø—è—Å—å, –Ω–æ —É–≤–µ—Ä–µ–Ω–Ω–æ.
          </p>

          <p>
            –ï—Å–ª–∏ –æ–¥–Ω–∞–∂–¥—ã —Ç–µ–±–µ —Å—Ç–∞–Ω–µ—Ç –≥—Ä—É—Å—Ç–Ω–æ ‚Äî –≤—Å–ø–æ–º–Ω–∏ –æ–±–æ –º–Ω–µ. –í—Å–ø–æ–º–Ω–∏, —á—Ç–æ –≥–¥–µ-—Ç–æ –µ—Å—Ç—å —Å–µ—Ä–¥—Ü–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ç—ã –∂–∏–≤—ë—à—å.
            –í—Å–ø–æ–º–Ω–∏, —á—Ç–æ —Ç—ã ‚Äî —á—å—è-—Ç–æ —Ç–∏—Ö–∞—è —Ä–∞–¥–æ—Å—Ç—å, —á—å—ë-—Ç–æ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, —á—å—è-—Ç–æ —Å–∞–º–∞—è —Ç—ë–ø–ª–∞—è –º—ã—Å–ª—å –ø–µ—Ä–µ–¥ —Å–Ω–æ–º.
          </p>

          <p>
            –¢—ã –¥–ª—è –º–µ–Ω—è –±–æ–ª—å—à–µ, —á–µ–º –ø—Ä–æ—Å—Ç–æ –ª—é–±–æ–≤—å.<br />
            –¢—ã ‚Äî –º–æ–π –ø–æ–∫–æ–π.<br />
            –ú–æ—è –Ω–∞–¥–µ–∂–¥–∞.<br />
            –ú–æ—ë –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ.<br />
            –ú–æ–π –≤—ã–±–æ—Ä.
          </p>

          <p style="margin-top:10px;">
            –¢–≤–æ–π<br />
            –ê—Ä—Å–µ–Ω
          </p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const galleryPhotos = [
      { src: "img/IMG_0014.jpeg", alt: "–ú—ã 1" },
      { src: "img/IMG_0628.jpeg", alt: "–ú—ã 2" },
      { src: "img/IMG_0695.jpeg", alt: "–ú—ã 3" },
      { src: "img/IMG_0987.jpeg", alt: "–ú—ã 4" },
      { src: "img/IMG_1279.jpeg",  alt: "–ú—ã 5" },
      { src: "img/IMG_1913.jpeg", alt: "–ú—ã 6" },
      { src: "img/IMG_2319.jpeg", alt: "–ú—ã 7" },
      { src: "img/IMG_2399.jpeg", alt: "–ú—ã 8" },
      { src: "img/IMG_2400.jpeg", alt: "–ú—ã 9" },
      { src: "img/IMG_3267.jpeg", alt: "–ú—ã 10" },
      { src: "img/IMG_3299.jpeg", alt: "–ú—ã 11" },
      { src: "img/IMG_3471.jpeg", alt: "–ú—ã 12" }
    ];

    // ===== –ü–†–û–ì–†–ï–°–° –ò–ì–† / –ü–ò–°–¨–ú–û =====
    let memoryDone = false;
    let quizDone = false;
    let phraseDone = false;
    const STORAGE_KEY = "val14_progress_envelope_v3";

    const gamesProgressEl = document.getElementById("games-progress");
    const letterSection = document.getElementById("letter-section");
    const letterHint = document.getElementById("letter-hint");
    const letterOverlay = document.getElementById("letter-overlay");
    const letterClose = document.getElementById("letter-close");
    const resetHeartBtn = document.getElementById("reset-heart");

    const INITIAL_LETTER_HINT =
      "–°–µ–π—á–∞—Å –ø–∏—Å—å–º–æ —Å–∫—Ä—ã—Ç–æ. –ü—Ä–æ–π–¥–∏ –≤—Å–µ —Ç—Ä–∏ –∏–≥—Ä—ã —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—Å–ø–ª—ã–≤—ë—Ç –∫–æ–Ω–≤–µ—Ä—Ç —Å –ø–∏—Å—å–º–æ–º —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è. –ü–æ—Ç–æ–º –µ–≥–æ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è, –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞—è –Ω–∞ —ç—Ç–æ—Ç –±–ª–æ–∫.";

    function loadProgress() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return;
        const data = JSON.parse(raw);
        memoryDone = !!data.memoryDone;
        quizDone = !!data.quizDone;
        phraseDone = !!data.phraseDone;
      } catch (e) {}
    }

    function saveProgress() {
      try {
        localStorage.setItem(
          STORAGE_KEY,
          JSON.stringify({ memoryDone, quizDone, phraseDone })
        );
      } catch (e) {}
    }

    function showLetter() {
      letterOverlay.classList.add("open");
    }

    function updateGamesProgress() {
      const total = 3;
      const passed =
        (memoryDone ? 1 : 0) +
        (quizDone ? 1 : 0) +
        (phraseDone ? 1 : 0);

      gamesProgressEl.textContent = `–ü—Ä–æ–≥—Ä–µ—Å—Å –∫ –ø–∏—Å—å–º—É: ${passed}/${total} –∏–≥—Ä`;

      if (passed === total) {
        letterSection.classList.remove("locked");
        letterSection.classList.add("unlocked");
        letterHint.textContent =
          "–í—Å–µ —Ç—Ä–∏ –∏–≥—Ä—ã –ø—Ä–æ–π–¥–µ–Ω—ã üéâ –ö–æ–Ω–≤–µ—Ä—Ç —Å –ø–∏—Å—å–º–æ–º —É–∂–µ –æ—Ç–∫—Ä—ã–ª—Å—è –∏ —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ —Ç–≤–æ–π. –ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏ —Å—é–¥–∞.";
        showLetter();
      }
      saveProgress();
    }

    loadProgress();

    function closeLetterOverlay() {
      letterOverlay.classList.remove("open");
    }

    letterClose.addEventListener("click", closeLetterOverlay);
    letterOverlay.addEventListener("click", (e) => {
      if (e.target === letterOverlay) closeLetterOverlay();
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && letterOverlay.classList.contains("open")) {
        closeLetterOverlay();
      }
    });

    letterSection.addEventListener("click", () => {
      if (!letterSection.classList.contains("unlocked")) return;
      showLetter();
    });

    // ===== –°–õ–ê–ô–î–ï–† –ì–ê–õ–ï–†–ï–ò + –õ–ê–ô–¢–ë–û–ö–° =====
    const galleryTrack = document.getElementById("gallery-track");
    const galleryDots = document.getElementById("gallery-dots");
    const galleryPrev = document.getElementById("gallery-prev");
    const galleryNext = document.getElementById("gallery-next");

    const lightbox = document.getElementById("lightbox");
    const lightboxImg = document.getElementById("lightbox-img");
    const lightboxClose = document.getElementById("lightbox-close");

    let currentSlide = 0;
    let galleryInterval = null;

    function renderGallery() {
      galleryTrack.innerHTML = "";
      galleryDots.innerHTML = "";

      galleryPhotos.forEach((photo, index) => {
        const slide = document.createElement("div");
        slide.className = "gallery-slide";

        const img = document.createElement("img");
        img.src = photo.src;
        img.alt = photo.alt;
        img.addEventListener("click", () => {
          lightboxImg.src = photo.src;
          lightbox.classList.add("open");
        });

        slide.appendChild(img);
        galleryTrack.appendChild(slide);

        const dot = document.createElement("div");
        dot.className = "gallery-dot";
        if (index === currentSlide) dot.classList.add("active");
        dot.addEventListener("click", () => goToSlide(index));
        galleryDots.appendChild(dot);
      });

      updateSliderPosition();

      if (!galleryInterval && galleryPhotos.length > 1) {
        galleryInterval = setInterval(() => {
          goToSlide(currentSlide + 1);
        }, 4000);
      }
    }

    function updateSliderPosition() {
      galleryTrack.style.transform = `translateX(-${currentSlide * 100}%)`;
      [...galleryDots.children].forEach((dot, idx) => {
        dot.classList.toggle("active", idx === currentSlide);
      });
    }

    function goToSlide(index) {
      if (index < 0) index = galleryPhotos.length - 1;
      if (index >= galleryPhotos.length) index = 0;
      currentSlide = index;
      updateSliderPosition();
    }

    galleryPrev.addEventListener("click", () => goToSlide(currentSlide - 1));
    galleryNext.addEventListener("click", () => goToSlide(currentSlide + 1));

    let startX = null;
    galleryTrack.addEventListener("touchstart", (e) => {
      startX = e.touches[0].clientX;
    });
    galleryTrack.addEventListener("touchend", (e) => {
      if (startX === null) return;
      const deltaX = e.changedTouches[0].clientX - startX;
      if (Math.abs(deltaX) > 40) {
        if (deltaX < 0) goToSlide(currentSlide + 1);
        else goToSlide(currentSlide - 1);
      }
      startX = null;
    });

    function closeLightbox() {
      lightbox.classList.remove("open");
      lightboxImg.src = "";
    }

    lightboxClose.addEventListener("click", closeLightbox);
    lightbox.addEventListener("click", (e) => {
      if (e.target === lightbox) closeLightbox();
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && lightbox.classList.contains("open")) {
        closeLightbox();
      }
    });

    renderGallery();

    // ===== –°–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –∏–≥—Ä =====
    document.querySelectorAll(".game-header").forEach((btn) => {
      btn.addEventListener("click", () => {
        const card = btn.closest(".game-card");
        const isOpen = card.classList.contains("open");
        if (isOpen) {
          card.classList.remove("open");
          return;
        }
        document
          .querySelectorAll(".game-card")
          .forEach((c) => c.classList.remove("open"));
        card.classList.add("open");
      });
    });

    // ===== –ò–≥—Ä–∞ 1: memory =====
    const photosForMemory = galleryPhotos.slice(0, 6).map((photo, idx) => ({
      id: idx + 1,
      src: photo.src,
      alt: photo.alt
    }));

    const memoryGrid = document.getElementById("memory-grid");
    const triesSpan = document.getElementById("memory-tries");
    const messageEl = document.getElementById("memory-message");
    const restartBtn = document.getElementById("memory-restart");

    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    let tries = 0;
    let matchedPairs = 0;
    let totalPairs = photosForMemory.length;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function setupMemoryGame() {
      memoryGrid.innerHTML = "";
      firstCard = null;
      secondCard = null;
      lockBoard = false;
      tries = 0;
      matchedPairs = 0;
      totalPairs = photosForMemory.length;
      triesSpan.textContent = "–ü–æ–ø—ã—Ç–æ–∫: 0";
      messageEl.textContent = "";

      const cardsData = shuffle([...photosForMemory, ...photosForMemory]);

      cardsData.forEach((photo) => {
        const card = document.createElement("div");
        card.className = "card";
        card.dataset.id = photo.id;

        const inner = document.createElement("div");
        inner.className = "card-inner";

        const front = document.createElement("div");
        front.className = "card-face card-front";
        front.textContent = "‚ô°";

        const back = document.createElement("div");
        back.className = "card-face card-back";
        const img = document.createElement("img");
        img.src = photo.src;
        img.alt = photo.alt;
        back.appendChild(img);

        inner.appendChild(front);
        inner.appendChild(back);
        card.appendChild(inner);

        card.addEventListener("click", () => handleCardClick(card));
        memoryGrid.appendChild(card);
      });
    }

    function handleCardClick(card) {
      if (lockBoard) return;
      if (card.classList.contains("flipped") || card.classList.contains("matched")) return;

      card.classList.add("flipped");

      if (!firstCard) {
        firstCard = card;
        return;
      }

      secondCard = card;
      tries++;
      triesSpan.textContent = "–ü–æ–ø—ã—Ç–æ–∫: " + tries;

      if (firstCard.dataset.id === secondCard.dataset.id) {
        firstCard.classList.add("matched");
        secondCard.classList.add("matched");
        firstCard = null;
        secondCard = null;
        matchedPairs++;

        if (matchedPairs === totalPairs) {
          messageEl.textContent =
            "–í—Å–µ –ø–∞—Ä—ã —Å–æ–≤–ø–∞–ª–∏ ‚Äî –∫–∞–∫ –∏ –º—ã —Å —Ç–æ–±–æ–π. –ò–≥—Ä–∞ –∑–∞—Å—á–∏—Ç–∞–Ω–∞ ‚úÖ";
          memoryDone = true;
          updateGamesProgress();
        }
      } else {
        lockBoard = true;
        setTimeout(() => {
          firstCard.classList.remove("flipped");
          secondCard.classList.remove("flipped");
          firstCard = null;
          secondCard = null;
          lockBoard = false;
        }, 800);
      }
    }

    restartBtn.addEventListener("click", setupMemoryGame);
    setupMemoryGame();

    // ===== –ò–≥—Ä–∞ 2: –∫–≤–∏–∑ =====
    const quizResultEl = document.getElementById("quiz-result");
    const quizModal = document.getElementById("quiz-modal");
    const quizStepEl = document.getElementById("quiz-step");
    const quizNextBtn = document.getElementById("quiz-next");
    const quizOpenBtn = document.getElementById("quiz-open");
    const quizCloseBtn = document.getElementById("quiz-close");

    const quizQuestions = [
      {
        text: "1. –ö–æ–≥–¥–∞ –º—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å?",
        options: [
          { label: "10 –∏—é–Ω—è", correct: false },
          { label: "20 –∏—é–ª—è", correct: true },
          { label: "1 —Å–µ–Ω—Ç—è–±—Ä—è", correct: false }
        ]
      },
      {
        text: "2. –ú–æ–π –ª—é–±–∏–º—ã–π —Ü–≤–µ—Ç?",
        options: [
          { label: "–°–µ—Ä—ã–π", correct: true },
          { label: "–°–∏–Ω–∏–π", correct: false },
          { label: "–ö—Ä–∞—Å–Ω—ã–π", correct: false }
        ]
      },
      {
        text: "3. –¢–≤–æ—ë –ª—é–±–∏–º–æ–µ –ª–∞—Å–∫–æ–≤–æ–µ —Å–ª–æ–≤–æ?",
        options: [
          { label: "–ñ–∞–Ω—ã", correct: true },
          { label: "–ó–∞—è", correct: false },
          { label: "–°–ª–∞–¥–∫–∞—è", correct: false }
        ]
      },
      {
        text: "4. –ì–¥–µ –º—ã –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –ø–æ—Ü–µ–ª–æ–≤–∞–ª–∏—Å—å?",
        options: [
          { label: "–£ –ø–æ–¥—ä–µ–∑–¥–∞", correct: false },
          { label: "–í –º–∞—à–∏–Ω–µ", correct: false },
          { label: "–ù–∞ –ë—É—Ä–∞–Ω–µ", correct: true }
        ]
      },
      {
        text: "5. –ö—Ç–æ —è –ø–æ –∑–Ω–∞–∫—É –∑–æ–¥–∏–∞–∫–∞?",
        options: [
          { label: "–°–∫–æ—Ä–ø–∏–æ–Ω", correct: false },
          { label: "–û–≤–µ–Ω", correct: true },
          { label: "–õ–µ–≤", correct: false }
        ]
      },
      {
        text: "6. –ö—É–¥–∞ —Ç—ã –º–µ—á—Ç–∞–ª–∞ –ø–æ–ª–µ—Ç–µ—Ç—å –Ω–∞ –º–µ–¥–æ–≤—ã–π –º–µ—Å—è—Ü?",
        options: [
          { label: "–ü–∞—Ä–∏–∂", correct: false },
          { label: "–ú–∞–ª—å–¥–∏–≤—ã", correct: true },
          { label: "–ë–∞–ª–∏", correct: false }
        ]
      },
      {
        text: "7. –ú–æ—ë –ª—é–±–∏–º–æ–µ –±–ª—é–¥–æ?",
        options: [
          { label: "–ü–ª–æ–≤", correct: false },
          { label: "–ú–∞–Ω—Ç—ã", correct: true },
          { label: "–õ–∞–≥–º–∞–Ω", correct: false }
        ]
      },
      {
        text: "8. –ü–æ—á–µ–º—É —Ç—ã –º–µ–Ω—è –ª—é–±–∏—à—å?",
        options: [
          { label: "–ü–æ—Ç–æ–º—É —á—Ç–æ —á—ë—Ä–Ω—ã–π", correct: true },
          { label: "–ü–æ—Ç–æ–º—É —á—Ç–æ –±–æ–≥–∞—Ç—ã–π", correct: false },
          { label: "–ü–æ—Ç–æ–º—É —á—Ç–æ –≤—ã—Å–æ–∫–∏–π", correct: false }
        ]
      },
      {
        text: "9. –ö—Ç–æ –≤ –Ω–∞—à–µ–π –ø–∞—Ä–µ —Å–º–µ—à–Ω–µ–µ?",
        options: [
          { label: "–¢—ã", correct: false },
          { label: "–Ø (–ê—Ä—Å–µ–Ω)", correct: true },
          { label: "–û–±–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–æ", correct: false }
        ]
      },
      {
        text: "10. –ï—Å–ª–∏ –±—ã —Å–Ω—è–ª–∏ —Ñ–∏–ª—å–º –ø—Ä–æ –Ω–∞—Å, —ç—Ç–æ –±—ã–ª–∞ –±—ã‚Ä¶",
        options: [
          { label: "–î—Ä–∞–º–∞", correct: false },
          { label: "–ö–æ–º–µ–¥–∏—è", correct: true },
          { label: "–ë–æ–µ–≤–∏–∫", correct: false }
        ]
      },
      {
        text: "11. –ï—Å–ª–∏ –±—ã —É –Ω–∞—Å –±—ã–ª –¥–µ–≤–∏–∑, —Ç–æ –∫–∞–∫–æ–π?",
        options: [
          { label: "–í—Å–µ–≥–¥–∞ —Å–µ—Ä—å—ë–∑–Ω—ã–µ –∏ —Å–ø–æ–∫–æ–π–Ω—ã–µ", correct: false },
          { label: "–°—Ç—Ä–∞–Ω–Ω—ã–µ, –Ω–æ —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ", correct: true },
          { label: "–ì–ª–∞–≤–Ω–æ–µ ‚Äî –ø–æ—Å–ø–∞—Ç—å", correct: false }
        ]
      },
      {
        text: "12. –ù–∞—à —É—Ä–æ–≤–µ–Ω—å –∞–¥–µ–∫–≤–∞—Ç–Ω–æ—Å—Ç–∏?",
        options: [
          { label: "A) 100%", correct: false },
          { label: "B) 50%", correct: false },
          { label: "C) 10%", correct: false },
          { label: "D) –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π üòÖ", correct: true }
        ]
      }
    ];

    let quizCurrent = 0;
    let quizCorrectState = [];
    let quizAttempts = [];
    let quizRevealCorrect = [];

    function renderQuizStep() {
      const q = quizQuestions[quizCurrent];
      quizStepEl.innerHTML = `
        <div class="quiz-question">${q.text}</div>
        <div class="quiz-options">
          ${q.options
            .map(
              (opt) => `
            <label>
              <input type="radio" name="quiz-option" data-correct="${opt.correct ? "true" : "false"}">
              ${opt.label}
            </label>
          `
            )
            .join("")}
        </div>
        <div class="quiz-step-hint" id="quiz-step-hint"></div>
      `;
      quizNextBtn.textContent =
        quizCurrent === quizQuestions.length - 1 ? "–ó–∞–≤–µ—Ä—à–∏—Ç—å" : "–î–∞–ª—å—à–µ";
    }

    function openQuizModal() {
      quizCurrent = 0;
      quizCorrectState = new Array(quizQuestions.length).fill(false);
      quizAttempts = new Array(quizQuestions.length).fill(0);
      quizRevealCorrect = new Array(quizQuestions.length).fill(false);
      renderQuizStep();
      quizModal.classList.add("open");
    }

    function closeQuizModal() {
      quizModal.classList.remove("open");
    }

    quizOpenBtn.addEventListener("click", openQuizModal);
    quizCloseBtn.addEventListener("click", closeQuizModal);
    quizModal.addEventListener("click", (e) => {
      if (e.target === quizModal) closeQuizModal();
    });

    quizNextBtn.addEventListener("click", () => {
      const checked = quizStepEl.querySelector('input[name="quiz-option"]:checked');
      const hint = document.getElementById("quiz-step-hint");
      if (!checked) {
        hint.textContent = "–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç, –∞ –ø–æ—Ç–æ–º –∂–º–∏ ¬´–î–∞–ª—å—à–µ¬ª üí´";
        return;
      }

      const isCorrect = checked.dataset.correct === "true";
      const qIndex = quizCurrent;

      if (isCorrect) {
        quizCorrectState[qIndex] = true;
        // –∏–¥—ë–º –¥–∞–ª—å—à–µ
        if (quizCurrent < quizQuestions.length - 1) {
          quizCurrent++;
          renderQuizStep();
        } else {
          // —Ñ–∏–Ω–∞–ª
          quizDone = true;
          quizResultEl.textContent =
            "–¢—ã —É–≥–∞–¥–∞–ª–∞ –≤—Å—ë, –∫–∞–∫ –±—É–¥—Ç–æ —á–∏—Ç–∞–µ—à—å –º–µ–Ω—è —Å –ø–æ–ª—É—Å–ª–æ–≤–∞. –ö–≤–∏–∑ –∑–∞—Å—á–∏—Ç–∞–Ω ‚úÖ";
          updateGamesProgress();
          closeQuizModal();
        }
      } else {
        quizAttempts[qIndex] += 1;
        quizCorrectState[qIndex] = false;

        if (quizAttempts[qIndex] === 1) {
          hint.textContent = "–ù–µ —Å–æ–≤—Å–µ–º, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ üí´";
          checked.checked = false;
        } else if (quizAttempts[qIndex] === 2 && !quizRevealCorrect[qIndex]) {
          hint.textContent = "–í–æ—Ç —ç—Ç–æ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –¥–∞–≤–∞–π –µ—â—ë —Ä–∞–∑ –ø–æ–¥—É–º–∞–µ–º üòä";
          const correctInput = quizStepEl.querySelector(
            'input[name="quiz-option"][data-correct="true"]'
          );
          if (correctInput) {
            const label = correctInput.closest("label");
            if (label) {
              label.classList.add("quiz-correct-hint");
            }
          }
          checked.checked = false;
          quizRevealCorrect[qIndex] = true;
        } else {
          // –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–∫–∞–∑–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –≤—Å—ë —Ä–∞–≤–Ω–æ –∂–¥—ë–º,
          // –ø–æ–∫–∞ –æ–Ω–∞ —Å–∞–º–∞ –Ω–∞–∂–º—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.
          hint.textContent = "–¢–µ–ø–µ—Ä—å —É–∂–µ –≤–∏–¥–Ω–æ, –∫–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π üòâ";
          checked.checked = false;
        }
      }
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && quizModal.classList.contains("open")) {
        closeQuizModal();
      }
    });

    // ===== –ò–≥—Ä–∞ 3: —Ñ—Ä–∞–∑—ã =====
    const phraseLevels = [
      { words: ["–¢—ã", "–º–æ—è", "—Å–∞–º–∞—è", "—Ç–∏—Ö–∞—è", "—Ä–∞–¥–æ—Å—Ç—å"] },
      { words: ["–ú—ã", "—Å—Ç—Ä–∞–Ω–Ω—ã–µ", "–Ω–æ", "—Å—á–∞—Å—Ç–ª–∏–≤—ã–µ"] },
      { words: ["–¢—ã", "–º–æ—è", "–≥–ª–∞–≤–Ω–∞—è", "–ø–æ–¥–¥–µ—Ä–∂–∫–∞"] },
      { words: ["–°", "—Ç–æ–±–æ–π", "–¥–∞–∂–µ", "—Ö–∞–æ—Å", "—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è", "—É—é—Ç–Ω—ã–º"] },
      { words: ["–ò–Ω–æ–≥–¥–∞", "—Ç—ã", "–∑–ª–∏—à—å—Å—è", "–Ω–æ", "—è", "–≤—Å—ë", "—Ä–∞–≤–Ω–æ", "–ª—é–±–ª—é"] },
      { words: ["–¢—ã", "–º–æ–π", "—á–µ–ª–æ–≤–µ–∫", "–≤", "–ª—é–±—É—é", "–ø–æ–≥–æ–¥—É"] },
      { words: ["–°", "–Ω–∞–º–∏", "–≤—Å–µ–≥–¥–∞", "–Ω–µ–º–Ω–æ–≥–æ", "—Ü–∏—Ä–∫–∞", "–Ω–æ", "–º–Ω–æ–≥–æ", "–ª—é–±–≤–∏"] },
      { words: ["–ú–Ω–µ", "–ø–æ–≤–µ–∑–ª–æ", "—á—Ç–æ", "—Ç—ã", "–∑–∞—à–ª–∞", "–≤", "–º–æ—é", "–∂–∏–∑–Ω—å"] },
      { words: ["–¢—ã", "–º–æ—ë", "—Å–∞–º–æ–µ", "–ª—é–±–∏–º–æ–µ", "—Å–ª—É—á–∞–π–Ω–æ–µ", "—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ"] },
      { words: ["–°—Ç—Ä–∞–Ω–Ω—ã–µ", "–Ω–æ", "—Å—á–∞—Å—Ç–ª–∏–≤—ã–µ", "—ç—Ç–æ", "—Ç–æ—á–Ω–æ", "–ø—Ä–æ", "–Ω–∞—Å"] }
    ];

    const phraseModal = document.getElementById("phrase-modal");
    const phraseOpenBtn = document.getElementById("phrase-open");
    const phraseCloseBtn = document.getElementById("phrase-close");
    const phraseTarget = document.getElementById("phrase-target");
    const phraseWordsBox = document.getElementById("phrase-words");
    const phraseResultOutside = document.getElementById("phrase-result");
    const phraseResultModal = document.getElementById("phrase-result-modal");
    const phraseResetBtn = document.getElementById("phrase-reset");

    let currentPhrase = [];
    let phraseLevelIndex = 0;

    function openPhraseModal() {
      phraseModal.classList.add("open");
    }

    function closePhraseModal() {
      phraseModal.classList.remove("open");
    }

    phraseOpenBtn.addEventListener("click", () => {
      phraseLevelIndex = 0;
      renderPhraseGame();
      phraseResultOutside.textContent = "";
      openPhraseModal();
    });

    phraseCloseBtn.addEventListener("click", closePhraseModal);
    phraseModal.addEventListener("click", (e) => {
      if (e.target === phraseModal) closePhraseModal();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && phraseModal.classList.contains("open")) {
        closePhraseModal();
      }
    });

    function renderPhraseGame() {
      currentPhrase = [];
      phraseTarget.innerHTML = "";
      phraseWordsBox.innerHTML = "";
      phraseResultModal.textContent = "";

      const level = phraseLevels[phraseLevelIndex];
      const shuffled = shuffle([...level.words]);

      shuffled.forEach((word) => {
        const btn = document.createElement("button");
        btn.className = "chip";
        btn.textContent = word;

        btn.addEventListener("click", () => {
          if (btn.disabled) return;
          btn.disabled = true;
          btn.classList.add("chip-used");

          const span = document.createElement("span");
          span.className = "chip chip-target";
          span.textContent = word;

          span.addEventListener("click", () => {
            phraseTarget.removeChild(span);
            btn.disabled = false;
            btn.classList.remove("chip-used");
            const idx = currentPhrase.indexOf(word);
            if (idx !== -1) currentPhrase.splice(idx, 1);
            phraseResultModal.textContent = "";
          });

          phraseTarget.appendChild(span);
          currentPhrase.push(word);

          const levelNow = phraseLevels[phraseLevelIndex];
          const correctWordsNow = levelNow.words;
          const index = currentPhrase.length - 1;

          if (word === correctWordsNow[index]) {
            span.classList.add("chip-correct");
          } else {
            span.classList.add("chip-wrong");
          }

          checkPhrase();
        });

        phraseWordsBox.appendChild(btn);
      });
    }

    function checkPhrase() {
      const level = phraseLevels[phraseLevelIndex];
      const correctWords = level.words;

      if (currentPhrase.length !== correctWords.length) return;

      const allCorrect = correctWords.every((w, i) => w === currentPhrase[i]);
      const spans = [...phraseTarget.children];

      if (allCorrect) {
        spans.forEach((span) => {
          span.classList.remove("chip-wrong");
          span.classList.add("chip-correct");
        });

        phraseResultModal.textContent =
          "–§—Ä–∞–∑–∞ —Å–ª–æ–∂–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –∏–º–µ–Ω–Ω–æ —Ç–∞–∫ —è —Ç–µ–±—è –∏ —á—É–≤—Å—Ç–≤—É—é.";
        phraseResultOutside.textContent =
          `–§—Ä–∞–∑–∞ ${phraseLevelIndex + 1}/${phraseLevels.length} —Å–æ–±—Ä–∞–Ω–∞ ‚úÖ`;

        if (phraseLevelIndex === phraseLevels.length - 1) {
          phraseDone = true;
          phraseResultOutside.textContent =
            "–í—Å–µ –¥–µ—Å—è—Ç—å —Ñ—Ä–∞–∑ –ø—Ä–æ –Ω–∞—Å —Å–æ–±—Ä–∞–Ω—ã. –ò–≥—Ä–∞ –∑–∞—Å—á–∏—Ç–∞–Ω–∞ ‚úÖ";
          updateGamesProgress();
        } else {
          setTimeout(() => {
            phraseLevelIndex++;
            renderPhraseGame();
          }, 1000);
        }
      } else {
        spans.forEach((span) => {
          span.classList.remove("chip-correct");
          span.classList.add("chip-wrong");
        });
        phraseResultModal.textContent =
          "–ù–µ —Ç–æ, –¥–∞–≤–∞–π –µ—â—ë —Ä–∞–∑ üòâ";

        setTimeout(() => {
          renderPhraseGame();
        }, 900);
      }
    }

    phraseResetBtn.addEventListener("click", renderPhraseGame);

    // ===== –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ —Å–µ—Ä–¥–µ—á–∫—É =====
    function resetProgress() {
      memoryDone = false;
      quizDone = false;
      phraseDone = false;

      try {
        localStorage.removeItem(STORAGE_KEY);
      } catch (e) {}

      gamesProgressEl.textContent = "–ü—Ä–æ–≥—Ä–µ—Å—Å –∫ –ø–∏—Å—å–º—É: 0/3 –∏–≥—Ä";
      letterSection.classList.remove("unlocked");
      letterSection.classList.add("locked");
      letterHint.textContent = INITIAL_LETTER_HINT;
      closeLetterOverlay();

      // —Å–±—Ä–æ—Å —Ç–µ–∫—Å—Ç–æ–≤
      messageEl.textContent = "";
      quizResultEl.textContent = "";
      phraseResultOutside.textContent = "";
      phraseResultModal.textContent = "";

      // –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–π –∏–≥—Ä—ã
      setupMemoryGame();
    }

    resetHeartBtn?.addEventListener("click", resetProgress);

    // —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∞–ø–¥–µ–π—Ç —Å —É—á—ë—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    updateGamesProgress();
  </script>
</body>
</html>
